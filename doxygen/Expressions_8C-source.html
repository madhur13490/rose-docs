<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ROSE: Expressions.C Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>Expressions.C</h1><a href="Expressions_8C.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* This source file contains anything related to SgAsm*Expression nodes. */</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include "<a class="code" href="sage3basic_8h.html">sage3basic.h</a>"</span>
<a name="l00003"></a>00003 <span class="preprocessor">#include "stringify.h"</span>          <span class="comment">/* used in error messages */</span>
<a name="l00004"></a>00004 
<a name="l00006"></a>00006 <span class="comment">//                                      Documentation for ROSETTA-generated things.</span>
<a name="l00008"></a>00008 <span class="comment"></span>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 
<a name="l00012"></a>00012 
<a name="l00055"></a>00055 
<a name="l00056"></a>00056 
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 <span class="comment">//                                      SgAsmIntegerValueExpression</span>
<a name="l00100"></a>00100 <span class="comment"></span>
<a name="l00101"></a>00101 
<a name="l00103"></a>00103 uint64_t
<a name="l00104"></a><a class="code" href="classSgAsmIntegerValueExpression.html#c221643b7916b4d9e2545250178b5707">00104</a> <a class="code" href="classSgAsmIntegerValueExpression.html#c221643b7916b4d9e2545250178b5707">SgAsmIntegerValueExpression::virtual_address</a>(<a class="code" href="classSgNode.html">SgNode</a> *node)
<a name="l00105"></a>00105 {
<a name="l00106"></a>00106     <span class="keywordflow">if</span> (!node)
<a name="l00107"></a>00107         <span class="keywordflow">return</span> 0;
<a name="l00108"></a>00108     <span class="keywordflow">if</span> (<a class="code" href="Cxx__Grammar_8h.html#3374b86a87959b6a02d8ca8f792d693e">isSgAsmFunction</a>(node))
<a name="l00109"></a>00109         <span class="keywordflow">return</span> <a class="code" href="Cxx__Grammar_8h.html#3374b86a87959b6a02d8ca8f792d693e">isSgAsmFunction</a>(node)-&gt;<a class="code" href="classSgAsmFunction.html#6edeeb78e01e2af6e59a5c6f7b0088af">get_entry_va</a>();
<a name="l00110"></a>00110     <span class="keywordflow">if</span> (<a class="code" href="Cxx__Grammar_8h.html#e7b8cab52957d9ba8706d1bfd6b11d8d">isSgAsmStatement</a>(node)) <span class="comment">// instructions, block, function, staticdata, ...</span>
<a name="l00111"></a>00111         <span class="keywordflow">return</span> <a class="code" href="Cxx__Grammar_8h.html#e7b8cab52957d9ba8706d1bfd6b11d8d">isSgAsmStatement</a>(node)-&gt;<a class="code" href="classSgAsmStatement.html#9d16f5ff82380f8b9c4071afe9f094a5">get_address</a>();
<a name="l00112"></a>00112     <span class="keywordflow">if</span> (<a class="code" href="Cxx__Grammar_8h.html#1e43f3eb7b10c1884e4c271e0bf3c2c1">isSgAsmGenericSymbol</a>(node))
<a name="l00113"></a>00113         <span class="keywordflow">return</span> <a class="code" href="Cxx__Grammar_8h.html#1e43f3eb7b10c1884e4c271e0bf3c2c1">isSgAsmGenericSymbol</a>(node)-&gt;<a class="code" href="classSgAsmGenericSymbol.html#8064321abd72e56a26566584fc4879a6">get_value</a>();
<a name="l00114"></a>00114     <span class="keywordflow">if</span> (<a class="code" href="Cxx__Grammar_8h.html#e223cffb51a81e8cd4506c2dffc3382f">isSgAsmPEImportItem</a>(node))
<a name="l00115"></a>00115         <span class="keywordflow">return</span> <a class="code" href="Cxx__Grammar_8h.html#e223cffb51a81e8cd4506c2dffc3382f">isSgAsmPEImportItem</a>(node)-&gt;<a class="code" href="classSgAsmPEImportItem.html#503a743a2c50a05b78743ccf02cca78e">get_bound_rva</a>().<a class="code" href="classrose__rva__t.html#fa5efcc332321e4b9bfb7aeae1be5dc4">get_va</a>();
<a name="l00116"></a>00116     <span class="keywordflow">if</span> (<a class="code" href="Cxx__Grammar_8h.html#e3feb656994a175a33fffc6f53a78ba1">isSgAsmPERVASizePair</a>(node))
<a name="l00117"></a>00117         <span class="keywordflow">return</span> <a class="code" href="Cxx__Grammar_8h.html#e3feb656994a175a33fffc6f53a78ba1">isSgAsmPERVASizePair</a>(node)-&gt;<a class="code" href="classSgAsmPERVASizePair.html#ef06326da3c6dbfe092f22c81dd9fec4">get_e_rva</a>().<a class="code" href="classrose__rva__t.html#fa5efcc332321e4b9bfb7aeae1be5dc4">get_va</a>();
<a name="l00118"></a>00118     <span class="keywordflow">if</span> (<a class="code" href="Cxx__Grammar_8h.html#21c6898a476df2490b5d028dfc3bc1d9">isSgAsmGenericSection</a>(node)) {
<a name="l00119"></a>00119         <a class="code" href="classSgAsmGenericSection.html">SgAsmGenericSection</a> *section = <a class="code" href="Cxx__Grammar_8h.html#21c6898a476df2490b5d028dfc3bc1d9">isSgAsmGenericSection</a>(node);
<a name="l00120"></a>00120         <span class="keywordflow">if</span> (section-&gt;<a class="code" href="classSgAsmGenericSection.html#104f95720dd8a1b1cc458c8c651943cb">is_mapped</a>())
<a name="l00121"></a>00121             <span class="keywordflow">return</span> section-&gt;<a class="code" href="classSgAsmGenericSection.html#ea9f50c4b61b494c81f6f2d1382f3de5">get_mapped_actual_va</a>();
<a name="l00122"></a>00122         <span class="keywordflow">return</span> 0;
<a name="l00123"></a>00123     }
<a name="l00124"></a>00124 
<a name="l00125"></a>00125     std::cerr &lt;&lt;<span class="stringliteral">"SgAsmIntegerValueExpression::virtual_address: non-addressable node type: "</span>
<a name="l00126"></a>00126               &lt;&lt;<a class="code" href="stringify_8C.html#c483ba71fb578d27a3128de6b6a6c35a">stringifyVariantT</a>(node-&gt;variantT(), <span class="stringliteral">"V_"</span>) &lt;&lt;std::endl;
<a name="l00127"></a>00127     assert(!<span class="stringliteral">"need addressable node type"</span>); <span class="comment">// to get location info in error messsage</span>
<a name="l00128"></a>00128     abort(); <span class="comment">// if asserts are disabled</span>
<a name="l00129"></a>00129 }
<a name="l00130"></a>00130 
<a name="l00149"></a>00149 std::string
<a name="l00150"></a><a class="code" href="classSgAsmIntegerValueExpression.html#d74c75a1bc387a72b9f9fd946d259322">00150</a> <a class="code" href="classSgAsmIntegerValueExpression.html#d74c75a1bc387a72b9f9fd946d259322">SgAsmIntegerValueExpression::get_label</a>(<span class="keywordtype">bool</span> quiet<span class="comment">/*=false*/</span>)<span class="keyword"> const</span>
<a name="l00151"></a>00151 <span class="keyword"></span>{
<a name="l00152"></a>00152     <a class="code" href="classSgNode.html">SgNode</a> *node = <a class="code" href="classSgAsmIntegerValueExpression.html#03a85d1a7c86cb075adaef1aaf77d4aa">get_base_node</a>();
<a name="l00153"></a>00153     <span class="keywordflow">if</span> (!node)
<a name="l00154"></a>00154         <span class="keywordflow">return</span> <span class="stringliteral">""</span>;
<a name="l00155"></a>00155 
<a name="l00156"></a>00156     <span class="comment">// Get the name of the base object if possible.</span>
<a name="l00157"></a>00157     std::string retval;
<a name="l00158"></a>00158     std::string refkind;
<a name="l00159"></a>00159     <span class="keywordflow">if</span> (<a class="code" href="Cxx__Grammar_8h.html#3374b86a87959b6a02d8ca8f792d693e">isSgAsmFunction</a>(node)) {
<a name="l00160"></a>00160         retval = <a class="code" href="Cxx__Grammar_8h.html#3374b86a87959b6a02d8ca8f792d693e">isSgAsmFunction</a>(node)-&gt;<a class="code" href="classSgAsmFunction.html#dfb6d9281f2d93a0ccc4974036ef2f1d">get_name</a>();
<a name="l00161"></a>00161         refkind = <span class="stringliteral">"Func"</span>;
<a name="l00162"></a>00162     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cxx__Grammar_8h.html#1e43f3eb7b10c1884e4c271e0bf3c2c1">isSgAsmGenericSymbol</a>(node)) {
<a name="l00163"></a>00163         retval = <a class="code" href="Cxx__Grammar_8h.html#1e43f3eb7b10c1884e4c271e0bf3c2c1">isSgAsmGenericSymbol</a>(node)-&gt;<a class="code" href="classSgAsmGenericSymbol.html#8cef0d96af06bb5e741df6a332c67e2c">get_name</a>()-&gt;<a class="code" href="classSgAsmGenericString.html#ba8bc51c8d891e4f8e8e87c45c62f7d5">get_string</a>();
<a name="l00164"></a>00164         refkind = <span class="stringliteral">"Sym"</span>;
<a name="l00165"></a>00165     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cxx__Grammar_8h.html#e223cffb51a81e8cd4506c2dffc3382f">isSgAsmPEImportItem</a>(node)) {
<a name="l00166"></a>00166         retval = <a class="code" href="Cxx__Grammar_8h.html#e223cffb51a81e8cd4506c2dffc3382f">isSgAsmPEImportItem</a>(node)-&gt;<a class="code" href="classSgAsmPEImportItem.html#61b8fa7aaf0025975a1f8c5d9e8f9d89">get_name</a>()-&gt;<a class="code" href="classSgAsmGenericString.html#ba8bc51c8d891e4f8e8e87c45c62f7d5">get_string</a>();
<a name="l00167"></a>00167         refkind = <span class="stringliteral">"Import"</span>;
<a name="l00168"></a>00168     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cxx__Grammar_8h.html#21c6898a476df2490b5d028dfc3bc1d9">isSgAsmGenericSection</a>(node)) {
<a name="l00169"></a>00169         retval = <a class="code" href="Cxx__Grammar_8h.html#21c6898a476df2490b5d028dfc3bc1d9">isSgAsmGenericSection</a>(node)-&gt;<a class="code" href="classSgAsmGenericSection.html#bd8a25584c163884134e874fd48cff16">get_short_name</a>();
<a name="l00170"></a>00170         refkind = <span class="stringliteral">"Section"</span>;
<a name="l00171"></a>00171     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cxx__Grammar_8h.html#8ea3968ea14e6511567d5e5b654315f1">isSgAsmInstruction</a>(node)) {
<a name="l00172"></a>00172         refkind = <span class="stringliteral">"Insn"</span>;
<a name="l00173"></a>00173     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cxx__Grammar_8h.html#9fc9f7b8a8e57c5fde42d3ad758c9718">isSgAsmStaticData</a>(node)) {
<a name="l00174"></a>00174         <a class="code" href="classSgAsmBlock.html">SgAsmBlock</a> *blk = SageInterface::getEnclosingNode&lt;SgAsmBlock&gt;(node);
<a name="l00175"></a>00175         <span class="keywordflow">if</span> (blk &amp;&amp; 0!=(blk-&gt;<a class="code" href="classSgAsmBlock.html#fa1981e2e350284f9aca229f10d5b82b">get_reason</a>() &amp; <a class="code" href="classSgAsmBlock.html#94a08ed03be6bcd089f1106a0aa7e48c1b1c894179759ed0bb4d6a76d54d90e3">SgAsmBlock::BLK_JUMPTABLE</a>)) {
<a name="l00176"></a>00176             refkind = <span class="stringliteral">"JumpTable"</span>;
<a name="l00177"></a>00177         } <span class="keywordflow">else</span> {
<a name="l00178"></a>00178             refkind = <span class="stringliteral">"StaticData"</span>;
<a name="l00179"></a>00179         }
<a name="l00180"></a>00180     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cxx__Grammar_8h.html#0f21c6b7a4aede1900e16a5122233a83">isSgAsmBlock</a>(node)) {
<a name="l00181"></a>00181         refkind = <span class="stringliteral">"BBlock"</span>;
<a name="l00182"></a>00182     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cxx__Grammar_8h.html#e3feb656994a175a33fffc6f53a78ba1">isSgAsmPERVASizePair</a>(node)) {
<a name="l00183"></a>00183         refkind = <span class="stringliteral">"Rva/Size"</span>;
<a name="l00184"></a>00184     } <span class="keywordflow">else</span> {
<a name="l00185"></a>00185         refkind = <span class="stringliteral">"Reference"</span>;
<a name="l00186"></a>00186     }
<a name="l00187"></a>00187 
<a name="l00188"></a>00188     <span class="comment">// If it has no name, then use something fairly generic.  That way we can at least indicate that the value is relative.</span>
<a name="l00189"></a>00189     int64_t offset = (int64_t)<a class="code" href="classSgAsmIntegerValueExpression.html#7d6775120369527832027ccb62ab60fb">get_relative_value</a>();
<a name="l00190"></a>00190     <span class="keywordflow">if</span> (retval.empty()) {
<a name="l00191"></a>00191         retval = <span class="stringliteral">"&lt;"</span> + refkind; <span class="comment">// extra level of brackets to indicate that it's not a real name</span>
<a name="l00192"></a>00192         <span class="keywordflow">if</span> (offset)
<a name="l00193"></a>00193             retval += <span class="stringliteral">"@"</span> + <a class="code" href="namespaceStringUtility.html#b07dfdb6df484680f9a29ad4fcf79f80">StringUtility::addrToString</a>(<a class="code" href="classSgAsmIntegerValueExpression.html#c221643b7916b4d9e2545250178b5707">virtual_address</a>(node), 32, <span class="keyword">false</span><span class="comment">/*unsigned*/</span>);
<a name="l00194"></a>00194         retval += <span class="stringliteral">"&gt;"</span>;
<a name="l00195"></a>00195     }
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     <span class="comment">// Append the offset, but consider it to be signed.  Disregard the number of significant bits in the absolute value and use</span>
<a name="l00198"></a>00198     <span class="comment">// a smaller bit width if possible.  But don't use the minimum bit width since this makes it hard to tell how many bits</span>
<a name="l00199"></a>00199     <span class="comment">// there are at a glance (use only 8, 16, 32, or 64).</span>
<a name="l00200"></a>00200     size_t nbits = 0;
<a name="l00201"></a>00201     <span class="keywordflow">if</span> (offset &gt; 0xffffffffll) {
<a name="l00202"></a>00202         nbits = 64;
<a name="l00203"></a>00203         retval += <span class="stringliteral">"+"</span>;
<a name="l00204"></a>00204     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (offset &gt; 0xffffll) {
<a name="l00205"></a>00205         nbits = 32;
<a name="l00206"></a>00206         retval += <span class="stringliteral">"+"</span>;
<a name="l00207"></a>00207     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (offset &gt; 0xffll) {
<a name="l00208"></a>00208         nbits = 16;
<a name="l00209"></a>00209         retval += <span class="stringliteral">"+"</span>;
<a name="l00210"></a>00210     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (offset &gt; 9) {
<a name="l00211"></a>00211         nbits = 8;
<a name="l00212"></a>00212         retval += <span class="stringliteral">"+"</span>;
<a name="l00213"></a>00213     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (offset &gt; 0) {
<a name="l00214"></a>00214         <span class="keywordtype">char</span> buf[64];
<a name="l00215"></a>00215         snprintf(buf, <span class="keyword">sizeof</span> buf, <span class="stringliteral">"+%"</span>PRId64, offset);
<a name="l00216"></a>00216         retval += buf;
<a name="l00217"></a>00217     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (offset==0) {
<a name="l00218"></a>00218         <span class="comment">/*void*/</span>
<a name="l00219"></a>00219     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (-offset &gt; 0xffffffffll) {
<a name="l00220"></a>00220         nbits = 64;
<a name="l00221"></a>00221         offset = -offset;
<a name="l00222"></a>00222         retval += <span class="stringliteral">"-"</span>;
<a name="l00223"></a>00223     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (-offset &gt; 0xffffll) {
<a name="l00224"></a>00224         nbits = 32;
<a name="l00225"></a>00225         offset = -offset;
<a name="l00226"></a>00226         retval += <span class="stringliteral">"-"</span>;
<a name="l00227"></a>00227     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (-offset &gt; 0xffll) {
<a name="l00228"></a>00228         nbits = 16;
<a name="l00229"></a>00229         offset = -offset;
<a name="l00230"></a>00230         retval += <span class="stringliteral">"-"</span>;
<a name="l00231"></a>00231     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (-offset &gt; 9) {
<a name="l00232"></a>00232         nbits = 8;
<a name="l00233"></a>00233         offset = -offset;
<a name="l00234"></a>00234         retval += <span class="stringliteral">"-"</span>;
<a name="l00235"></a>00235     } <span class="keywordflow">else</span> {
<a name="l00236"></a>00236         <span class="keywordtype">char</span> buf[64];
<a name="l00237"></a>00237         snprintf(buf, <span class="keyword">sizeof</span> buf, <span class="stringliteral">"%"</span>PRId64, offset);
<a name="l00238"></a>00238         retval += buf;
<a name="l00239"></a>00239     }
<a name="l00240"></a>00240     <span class="keywordflow">if</span> (nbits!=0)
<a name="l00241"></a>00241         retval += <a class="code" href="namespaceStringUtility.html#b07dfdb6df484680f9a29ad4fcf79f80">StringUtility::addrToString</a>(offset, nbits, <span class="keyword">false</span><span class="comment">/*unsigned*/</span>);
<a name="l00242"></a>00242 
<a name="l00243"></a>00243     <span class="keywordflow">return</span> retval;
<a name="l00244"></a>00244 }
<a name="l00245"></a>00245 
<a name="l00247"></a>00247 <span class="keywordtype">void</span>
<a name="l00248"></a><a class="code" href="classSgAsmIntegerValueExpression.html#45ee2ef7ae8c6f4ea875f1141ff2ff19">00248</a> <a class="code" href="classSgAsmIntegerValueExpression.html#45ee2ef7ae8c6f4ea875f1141ff2ff19">SgAsmIntegerValueExpression::set_significant_bits</a>(size_t nbits)
<a name="l00249"></a>00249 {
<a name="l00250"></a>00250     assert(nbits&gt;0 &amp;&amp; nbits&lt;=64); <span class="comment">// usual values are 8, 16, 32, and 64</span>
<a name="l00251"></a>00251     <a class="code" href="classSgAsmIntegerValueExpression.html#6486ba3181f4f61e4942bf91ce7ca7e8">p_significant_bits</a> = nbits;
<a name="l00252"></a>00252 }
<a name="l00253"></a>00253 
<a name="l00255"></a>00255 size_t
<a name="l00256"></a><a class="code" href="classSgAsmIntegerValueExpression.html#001c3f84ebe43934bbd1739dc0d756b9">00256</a> <a class="code" href="classSgAsmIntegerValueExpression.html#001c3f84ebe43934bbd1739dc0d756b9">SgAsmIntegerValueExpression::get_significant_bits</a>()<span class="keyword"> const</span>
<a name="l00257"></a>00257 <span class="keyword"></span>{
<a name="l00258"></a>00258     <span class="keywordflow">return</span> <a class="code" href="classSgAsmIntegerValueExpression.html#6486ba3181f4f61e4942bf91ce7ca7e8">p_significant_bits</a>;
<a name="l00259"></a>00259 }
<a name="l00260"></a>00260 
<a name="l00265"></a>00265 <span class="keywordtype">void</span>
<a name="l00266"></a><a class="code" href="classSgAsmIntegerValueExpression.html#b0e0e47f36d6ff9077fe8a54f6c7fede">00266</a> <a class="code" href="classSgAsmIntegerValueExpression.html#b0e0e47f36d6ff9077fe8a54f6c7fede">SgAsmIntegerValueExpression::make_relative_to</a>(<a class="code" href="classSgNode.html">SgNode</a> *base_node)
<a name="l00267"></a>00267 {
<a name="l00268"></a>00268     uint64_t cur_value = <a class="code" href="classSgAsmIntegerValueExpression.html#6f34176790d22016a331452ef071bb12">get_absolute_value</a>();
<a name="l00269"></a>00269     uint64_t base_va = <a class="code" href="classSgAsmIntegerValueExpression.html#c221643b7916b4d9e2545250178b5707">virtual_address</a>(base_node);
<a name="l00270"></a>00270     <a class="code" href="classSgAsmIntegerValueExpression.html#27469f7adf504e4b2868df1952268d40">set_base_node</a>(base_node);
<a name="l00271"></a>00271     <a class="code" href="classSgAsmIntegerValueExpression.html#e1d767f7c12293499c8ee35ff5a4f5fa">set_relative_value</a>(cur_value - base_va);    <span class="comment">// mod 2^64</span>
<a name="l00272"></a>00272 }
<a name="l00273"></a>00273 
<a name="l00276"></a>00276 uint64_t
<a name="l00277"></a><a class="code" href="classSgAsmIntegerValueExpression.html#34e1283dc3548d325ce4c2fcc39035f7">00277</a> <a class="code" href="classSgAsmIntegerValueExpression.html#34e1283dc3548d325ce4c2fcc39035f7">SgAsmIntegerValueExpression::get_base_address</a>()<span class="keyword"> const</span>
<a name="l00278"></a>00278 <span class="keyword"></span>{
<a name="l00279"></a>00279     <span class="keywordflow">return</span> <a class="code" href="classSgAsmIntegerValueExpression.html#c221643b7916b4d9e2545250178b5707">virtual_address</a>(<a class="code" href="classSgAsmIntegerValueExpression.html#03a85d1a7c86cb075adaef1aaf77d4aa">get_base_node</a>());
<a name="l00280"></a>00280 }
<a name="l00281"></a>00281 
<a name="l00286"></a>00286 uint64_t
<a name="l00287"></a><a class="code" href="classSgAsmIntegerValueExpression.html#6f34176790d22016a331452ef071bb12">00287</a> <a class="code" href="classSgAsmIntegerValueExpression.html#6f34176790d22016a331452ef071bb12">SgAsmIntegerValueExpression::get_absolute_value</a>(size_t nbits)<span class="keyword"> const</span>
<a name="l00288"></a>00288 <span class="keyword"></span>{
<a name="l00289"></a>00289     <span class="keywordflow">if</span> (0==nbits)
<a name="l00290"></a>00290         nbits = <a class="code" href="classSgAsmIntegerValueExpression.html#001c3f84ebe43934bbd1739dc0d756b9">get_significant_bits</a>();
<a name="l00291"></a>00291     uint64_t retval = <a class="code" href="classSgAsmIntegerValueExpression.html#34e1283dc3548d325ce4c2fcc39035f7">get_base_address</a>() + <a class="code" href="classSgAsmIntegerValueExpression.html#7d6775120369527832027ccb62ab60fb">get_relative_value</a>();
<a name="l00292"></a>00292     <span class="comment">// note: (uint64_t)1 &lt;&lt; 64 is undefined behavior, so do it the hard way</span>
<a name="l00293"></a>00293     uint64_t mask = (nbits &gt;= 64 ? (uint64_t)0 : (uint64_t)1&lt;&lt;(uint64_t)nbits) - 1;
<a name="l00294"></a>00294     <span class="keywordflow">return</span> retval &amp; mask; <span class="comment">// clear high-order bits</span>
<a name="l00295"></a>00295 }
<a name="l00296"></a>00296 
<a name="l00298"></a>00298 int64_t
<a name="l00299"></a><a class="code" href="classSgAsmIntegerValueExpression.html#43a4205d41bd64d0e875f45f53cfa23f">00299</a> <a class="code" href="classSgAsmIntegerValueExpression.html#43a4205d41bd64d0e875f45f53cfa23f">SgAsmIntegerValueExpression::get_absolute_signed_value</a>()<span class="keyword"> const</span>
<a name="l00300"></a>00300 <span class="keyword"></span>{
<a name="l00301"></a>00301     <span class="keywordflow">return</span> <a class="code" href="classSgAsmIntegerValueExpression.html#34e1283dc3548d325ce4c2fcc39035f7">get_base_address</a>() + <a class="code" href="classSgAsmIntegerValueExpression.html#7d6775120369527832027ccb62ab60fb">get_relative_value</a>();
<a name="l00302"></a>00302 }
<a name="l00303"></a>00303 
<a name="l00307"></a>00307 <span class="keywordtype">void</span>
<a name="l00308"></a><a class="code" href="classSgAsmIntegerValueExpression.html#e48bcf93b67f1091a68867e4676aca46">00308</a> <a class="code" href="classSgAsmIntegerValueExpression.html#e48bcf93b67f1091a68867e4676aca46">SgAsmIntegerValueExpression::set_absolute_value</a>(uint64_t v)
<a name="l00309"></a>00309 {
<a name="l00310"></a>00310     uint64_t new_offset = v - <a class="code" href="classSgAsmIntegerValueExpression.html#34e1283dc3548d325ce4c2fcc39035f7">get_base_address</a>(); <span class="comment">// mod 2^64</span>
<a name="l00311"></a>00311     <a class="code" href="classSgAsmIntegerValueExpression.html#e1d767f7c12293499c8ee35ff5a4f5fa">set_relative_value</a>(new_offset);
<a name="l00312"></a>00312 }
<a name="l00313"></a>00313 
<a name="l00316"></a>00316 <a class="code" href="classSgAsmType.html">SgAsmType</a> *
<a name="l00317"></a><a class="code" href="classSgAsmIntegerValueExpression.html#a40e997ec0811e1f0f816e0e33f07804">00317</a> <a class="code" href="classSgAsmIntegerValueExpression.html#a40e997ec0811e1f0f816e0e33f07804">SgAsmIntegerValueExpression::get_type</a>() 
<a name="l00318"></a>00318 {
<a name="l00319"></a>00319     abort();
<a name="l00320"></a>00320 }
<a name="l00321"></a>00321 
<a name="l00322"></a>00322 
<a name="l00323"></a>00323 
<a name="l00324"></a>00324 
<a name="l00326"></a>00326 <span class="comment">//                                      Accessors for subclasses</span>
<a name="l00327"></a>00327 <span class="comment">//</span>
<a name="l00328"></a>00328 <span class="comment">// These are the get_value() and set_value() accessors for subclasses.  They're backward compatible with the old interface that</span>
<a name="l00329"></a>00329 <span class="comment">// stored the absolute value in the subclass objects with data types particular to that subclass.</span>
<a name="l00331"></a>00331 <span class="comment"></span>
<a name="l00333"></a>00333 uint8_t
<a name="l00334"></a><a class="code" href="classSgAsmByteValueExpression.html#8e415b17e97de40bc5e3b790d5805b58">00334</a> <a class="code" href="classSgAsmByteValueExpression.html#8e415b17e97de40bc5e3b790d5805b58">SgAsmByteValueExpression::get_value</a>()<span class="keyword"> const</span>
<a name="l00335"></a>00335 <span class="keyword"></span>{
<a name="l00336"></a>00336     <span class="keywordflow">return</span> <a class="code" href="classSgAsmIntegerValueExpression.html#6f34176790d22016a331452ef071bb12">SgAsmIntegerValueExpression::get_absolute_value</a>();
<a name="l00337"></a>00337 }
<a name="l00338"></a>00338 
<a name="l00340"></a>00340 <span class="keywordtype">void</span>
<a name="l00341"></a><a class="code" href="classSgAsmByteValueExpression.html#628aded8a1740292468fcf3d436e23ff">00341</a> <a class="code" href="classSgAsmByteValueExpression.html#628aded8a1740292468fcf3d436e23ff">SgAsmByteValueExpression::set_value</a>(uint8_t n_)
<a name="l00342"></a>00342 {
<a name="l00343"></a>00343     <a class="code" href="classSgAsmIntegerValueExpression.html#45ee2ef7ae8c6f4ea875f1141ff2ff19">set_significant_bits</a>(8);
<a name="l00344"></a>00344     uint64_t n = (int64_t)(int8_t)n_; <span class="comment">// sign extend</span>
<a name="l00345"></a>00345     <a class="code" href="classSgAsmIntegerValueExpression.html#e48bcf93b67f1091a68867e4676aca46">SgAsmIntegerValueExpression::set_absolute_value</a>(n);
<a name="l00346"></a>00346 }
<a name="l00347"></a>00347 
<a name="l00349"></a>00349 uint16_t
<a name="l00350"></a><a class="code" href="classSgAsmWordValueExpression.html#ec7880171b93b65b8b4fd9b39846d17b">00350</a> <a class="code" href="classSgAsmWordValueExpression.html#ec7880171b93b65b8b4fd9b39846d17b">SgAsmWordValueExpression::get_value</a>()<span class="keyword"> const</span>
<a name="l00351"></a>00351 <span class="keyword"></span>{
<a name="l00352"></a>00352     <span class="keywordflow">return</span> <a class="code" href="classSgAsmIntegerValueExpression.html#6f34176790d22016a331452ef071bb12">SgAsmIntegerValueExpression::get_absolute_value</a>();
<a name="l00353"></a>00353 }
<a name="l00354"></a>00354 
<a name="l00356"></a>00356 <span class="keywordtype">void</span>
<a name="l00357"></a><a class="code" href="classSgAsmWordValueExpression.html#13bd7867be661496690c6e63b0be6f0a">00357</a> <a class="code" href="classSgAsmWordValueExpression.html#13bd7867be661496690c6e63b0be6f0a">SgAsmWordValueExpression::set_value</a>(uint16_t n_)
<a name="l00358"></a>00358 {
<a name="l00359"></a>00359     <a class="code" href="classSgAsmIntegerValueExpression.html#45ee2ef7ae8c6f4ea875f1141ff2ff19">set_significant_bits</a>(16);
<a name="l00360"></a>00360     uint64_t n = (int64_t)(int16_t)n_; <span class="comment">// sign extend</span>
<a name="l00361"></a>00361     <a class="code" href="classSgAsmIntegerValueExpression.html#e48bcf93b67f1091a68867e4676aca46">SgAsmIntegerValueExpression::set_absolute_value</a>(n);
<a name="l00362"></a>00362 }
<a name="l00363"></a>00363 
<a name="l00365"></a>00365 uint32_t
<a name="l00366"></a><a class="code" href="classSgAsmDoubleWordValueExpression.html#0776831c616546c0a277f1b5ce2782f7">00366</a> <a class="code" href="classSgAsmDoubleWordValueExpression.html#0776831c616546c0a277f1b5ce2782f7">SgAsmDoubleWordValueExpression::get_value</a>()<span class="keyword"> const</span>
<a name="l00367"></a>00367 <span class="keyword"></span>{
<a name="l00368"></a>00368     <span class="keywordflow">return</span> <a class="code" href="classSgAsmIntegerValueExpression.html#6f34176790d22016a331452ef071bb12">SgAsmIntegerValueExpression::get_absolute_value</a>();
<a name="l00369"></a>00369 }
<a name="l00370"></a>00370 
<a name="l00372"></a>00372 <span class="keywordtype">void</span>
<a name="l00373"></a><a class="code" href="classSgAsmDoubleWordValueExpression.html#b1c961293ccd71cb1bb256c8482da300">00373</a> <a class="code" href="classSgAsmDoubleWordValueExpression.html#b1c961293ccd71cb1bb256c8482da300">SgAsmDoubleWordValueExpression::set_value</a>(uint32_t n_)
<a name="l00374"></a>00374 {
<a name="l00375"></a>00375     <a class="code" href="classSgAsmIntegerValueExpression.html#45ee2ef7ae8c6f4ea875f1141ff2ff19">set_significant_bits</a>(32);
<a name="l00376"></a>00376     uint64_t n = (int64_t)(int32_t)n_; <span class="comment">// sign extend</span>
<a name="l00377"></a>00377     <a class="code" href="classSgAsmIntegerValueExpression.html#e48bcf93b67f1091a68867e4676aca46">SgAsmIntegerValueExpression::set_absolute_value</a>(n);
<a name="l00378"></a>00378 }
<a name="l00379"></a>00379 
<a name="l00381"></a>00381 uint64_t
<a name="l00382"></a><a class="code" href="classSgAsmQuadWordValueExpression.html#51cd0cde04f955e1c111da2fb4fa1c84">00382</a> <a class="code" href="classSgAsmQuadWordValueExpression.html#51cd0cde04f955e1c111da2fb4fa1c84">SgAsmQuadWordValueExpression::get_value</a>()<span class="keyword"> const</span>
<a name="l00383"></a>00383 <span class="keyword"></span>{
<a name="l00384"></a>00384     <span class="keywordflow">return</span> <a class="code" href="classSgAsmIntegerValueExpression.html#6f34176790d22016a331452ef071bb12">SgAsmIntegerValueExpression::get_absolute_value</a>();
<a name="l00385"></a>00385 }
<a name="l00386"></a>00386 
<a name="l00388"></a>00388 <span class="keywordtype">void</span>
<a name="l00389"></a><a class="code" href="classSgAsmQuadWordValueExpression.html#9a4b59dd1c4359120d3950c0f0df14b6">00389</a> <a class="code" href="classSgAsmQuadWordValueExpression.html#9a4b59dd1c4359120d3950c0f0df14b6">SgAsmQuadWordValueExpression::set_value</a>(uint64_t n_)
<a name="l00390"></a>00390 {
<a name="l00391"></a>00391     <a class="code" href="classSgAsmIntegerValueExpression.html#45ee2ef7ae8c6f4ea875f1141ff2ff19">set_significant_bits</a>(64);
<a name="l00392"></a>00392     <a class="code" href="classSgAsmIntegerValueExpression.html#e48bcf93b67f1091a68867e4676aca46">SgAsmIntegerValueExpression::set_absolute_value</a>(n_);
<a name="l00393"></a>00393 }
<a name="l00394"></a>00394     
<a name="l00395"></a>00395 
<a name="l00397"></a>00397 <span class="comment">//                                      Subclass Data Types</span>
<a name="l00399"></a>00399 <span class="comment"></span>
<a name="l00400"></a>00400 <a class="code" href="classSgAsmType.html">SgAsmType</a> *
<a name="l00401"></a><a class="code" href="classSgAsmByteValueExpression.html#6a75350a942b70bf9f47663091ee0d6c">00401</a> <a class="code" href="classSgAsmByteValueExpression.html#6a75350a942b70bf9f47663091ee0d6c">SgAsmByteValueExpression::get_type</a>()
<a name="l00402"></a>00402 {
<a name="l00403"></a>00403     <span class="keywordflow">return</span> <a class="code" href="classSgAsmTypeByte.html#84588bf9da44e124a9438eb29426e6ce">SgAsmTypeByte::createType</a>();
<a name="l00404"></a>00404 }
<a name="l00405"></a>00405 
<a name="l00406"></a>00406 <a class="code" href="classSgAsmType.html">SgAsmType</a> *
<a name="l00407"></a><a class="code" href="classSgAsmWordValueExpression.html#4993d48de4ce50cbf922ca0e4cb589a5">00407</a> <a class="code" href="classSgAsmWordValueExpression.html#4993d48de4ce50cbf922ca0e4cb589a5">SgAsmWordValueExpression::get_type</a>()
<a name="l00408"></a>00408 {
<a name="l00409"></a>00409     <span class="keywordflow">return</span> <a class="code" href="classSgAsmTypeWord.html#b0fbb3fb5726c62931ec85895b7d92ca">SgAsmTypeWord::createType</a>();
<a name="l00410"></a>00410 }
<a name="l00411"></a>00411 
<a name="l00412"></a>00412 <a class="code" href="classSgAsmType.html">SgAsmType</a> *
<a name="l00413"></a><a class="code" href="classSgAsmDoubleWordValueExpression.html#106ad66a2909875c3c2e098d4c75a157">00413</a> <a class="code" href="classSgAsmDoubleWordValueExpression.html#106ad66a2909875c3c2e098d4c75a157">SgAsmDoubleWordValueExpression::get_type</a>()
<a name="l00414"></a>00414 {
<a name="l00415"></a>00415     <span class="keywordflow">return</span> <a class="code" href="classSgAsmTypeDoubleWord.html#dba7f6a80d140f30e1cab7e1d662d2d1">SgAsmTypeDoubleWord::createType</a>();
<a name="l00416"></a>00416 }
<a name="l00417"></a>00417 
<a name="l00418"></a>00418 <a class="code" href="classSgAsmType.html">SgAsmType</a> *
<a name="l00419"></a><a class="code" href="classSgAsmQuadWordValueExpression.html#808413ef99a0e357e8fc6c69527a8e0f">00419</a> <a class="code" href="classSgAsmQuadWordValueExpression.html#808413ef99a0e357e8fc6c69527a8e0f">SgAsmQuadWordValueExpression::get_type</a>()
<a name="l00420"></a>00420 {
<a name="l00421"></a>00421     <span class="keywordflow">return</span> <a class="code" href="classSgAsmTypeQuadWord.html#9fe0d855d03a4b3d14c8b7c02b34d1b8">SgAsmTypeQuadWord::createType</a>();
<a name="l00422"></a>00422 }
<a name="l00423"></a>00423 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on 20 Jan 2013 for ROSE by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
