<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ROSE: ROSE Project ToDo List</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<h1><a class="anchor" name="projectToDoList">ROSE Project ToDo List</a></h1>This page documents remaining things to do which are not a part of the todo list generated specific to each IR node by Doxygen. The source for this web page is in ROSE/docs/testDoxygen/ProjectToDoList.docs (which is copied into ROSE/src/frontend/SageIII/docs before internal releases).<h2><a class="anchor" name="CurrentDistribution">
TODO List for Next Checkin</a></h2>
What is left is:<ol type=1>
<li>Add Gary's expect scripts and documentation (to <a class="el" href="namespaceROSE.html">ROSE</a> User Manual).</li><li>Make tutorial example for Peter's changes to AstCopy.</li><li>Need to document the EDG upc mode (--edg:upc); supported internally by <a class="el" href="namespaceROSE.html">ROSE</a> (data in in the IR but no runtime library is currently available with <a class="el" href="namespaceROSE.html">ROSE</a>, so the support for UPC is incomplete depending on your point of view).</li><li>Dominator trees are not built into librose.so, this was a mistake. Also Brian White suggests fixing "~SimpleDirectedGraphNode();" to be "~SimpleDirectedGraphNode() { }".</li><li>Define a mechanism to pass options to the backend (is this even needed)</li><li>Andreas says that we can remove astQuery files: astQueryInheritedAttribute.* nodeQueryInheritedAttribute.* numberQueryInheritedAttribute.* nameQueryInheritedAttribute.*</li><li>Add option to permit system header files to be installed separately (to be run before "make check"), perhaps "make install-system-headers".</li><li>Gary Yuan's bug: specification of multiple source files on the command line fails if we are linking, because the backend is invoked separately for each ROSE-generated source file (instead of generating all the source files first and then calling the backend compiler specifiying the same multiple (ROSE-generated) source files).</li><li>Move ROSE/src/wave-merge to ROSE/src/3rdPartyLibraries/wave-merge, check with Andreas. Also the subdirectory in wave, "NEW_ROSE" matches a common name used for the root of the <a class="el" href="namespaceROSE.html">ROSE</a> directory tree by one of the developers, and should be changed to be a better name.</li><li>Remove DESTDIR from Makefile.am, it is not set, it is always empty, and it is confusing. In many cases it should likely be $distdir instead.</li><li><a class="el" href="classSg__File__Info.html">Sg_File_Info</a> objects for the pointer dereference and array dereference (<a class="el" href="classSgPointerDerefExp.html">SgPointerDerefExp</a> and <a class="el" href="classSgPntrArrRefExp.html">SgPntrArrRefExp</a>) (e.g. x = *Deref; x= badDeref2[3];).</li><li>Change define IA64_ABI FALSE to TRUE in EDG (src/host_envir.h).</li><li>Add Gallery of figures from the <a class="el" href="namespaceROSE.html">ROSE</a> project (include Thomas' figures at ~panas2/screens/.</li></ol>
<p>
report the position of the declaration of the variable referenced<p>
Work that will be done within a later release:<ol type=1>
<li>Use of "--edg:old_c" to support K&amp;R C does not work because the prototyped versions of functions are used within rose_edg_macros_and_functions_required_for_gnu.h and these are not allowed in EDG's { --old_c} mode (translated from the <a class="el" href="namespaceROSE.html">ROSE</a> { --edg:old_c}.</li><li>Need to add -FPIC flags to compile line by default (currently specified explicitly)</li><li>Overloaded operators need to have their precedence computed so that we can avoid the numerous special cases that we currently handle in the code generation (unparsing).</li><li>Liao reports a bug in the LowLevelRewrite::insert() (as I recall). This will have to be fixed later.</li><li>Strings of spaces can be more easily built using "string (count,' ');" (suggestion from Jeremiah). Might be useful in ROSETTA and/or the code generation (unparser).</li><li>Operator precedence needs to be reviewed, "==" precedence has been changed from 2 --&gt; 9. Cast operator precedence different between C style and C++ style casts (problem for Rama?).</li><li>Need to handle case of: <br>
 "if (parentExpr != NULL &amp;&amp; parentExpr-&gt;variantT() == V_SgAssignInitializer)" in modified_sage.C in ROSE/src/backend/unparse, currently commented out as it has been for a long time but perhaps it should be there. Test code test2006_115.C demonstrates some problems specific to <a class="el" href="classSgExprListExp.html">SgExprListExp</a> in return statements, initializers, and <a class="el" href="classSgAggregateInitializer.html">SgAggregateInitializer</a> objects. This is part of revisiting precedence handling for other than just primative type operators within <a class="el" href="namespaceROSE.html">ROSE</a>.</li><li>Remove the <a class="el" href="classSgScopeOp.html">SgScopeOp</a> (or at least depricate it for now!) It is part of the older CC++ support within <a class="el" href="namespaceROSE.html">ROSE</a> and is no longer used or associated with C or C++.</li><li>The performance of the compilation using <a class="el" href="namespaceROSE.html">ROSE</a> for template code is dominated by the ast postprocessing resetTemplateNames. The performance of this function could be significantly improved and would improve compilation of Kull and other template rich applications.</li><li>Add example (such as in "bool SageInterface::is_C_language()") to demonstrate traversals over a subset of the AST (in this case <a class="el" href="classSgFile.html">SgFile</a> IR nodes).</li><li>Debug name mangling (existing system can cause some names to be very long currently some statistical information is output to monitor this problem).</li><li>QualifiedNameList handling is done by value and should be handled via pointers to be consistant with the rest of SageIII and avoid possible memory leaks where they are used! There are places where set_qualifiedNameList() is called redundently on the same named entity.</li><li>EDG registers a Control-C signal handler and so Control-C causes a non-intuative error message for users. This could be unregistered after the EDG phase, and a more <a class="el" href="namespaceROSE.html">ROSE</a> specific signal handler could be built (or none at all).<ol type=a>
<li><a class="el" href="classSgAsmStmt.html">SgAsmStmt</a> should not be derived from a SgDeclaration (where the asm option is used as a declaration it is really just a <a class="el" href="classSgVariableDeclaration.html">SgVariableDeclaration</a> (using the asm option). It should be just a regular <a class="el" href="classSgStatement.html">SgStatement</a>.</li></ol>
</li><li>Option "-rose:verbose n" requires the parameter and needs to be fixed so that it is not a failure to provide it. e.g. "sampleRoseTranslator -rose:verbose test.C" should work but currently segfaults. Note from Lingxiao: Certain command line options are not handled rightly. For example, "./sampleRoseTranslator -rose:verbose test.C" causes a seg fault.I figured it may due to "CommandlineProcessing::isOptionWithParameter". It seems no check whether there is a real parameter provided for an option. I see this because I use <a class="el" href="namespaceCommandlineProcessing.html#7e92613500df57ea14fa096e6af36dd9">CommandlineProcessing::isOptionWithParameter</a>(argc, argv, "--uc:", "polymorphic-unit", uc_polymorphic_unit, true); in my code, and "./UC test.C --uc:polymorphic-unit" seg faults but "./UC test.C --uc:polymorphic-unit 1" works fine.</li><li>Checking the file info object before unparsing statements has been common for a long time in <a class="el" href="namespaceROSE.html">ROSE</a>, but a number of test codes demonstrate that this is required on a statement level since include file can operate on expressions. So this should be handled on a statement AND expression level instead of just a statement level.</li><li>Need to fix K&amp;R mode; currently function prototypes in rose_edg_required_macros_and_functions.h.in fail to compile when using K&amp;R C mode in EDG (usign: --edg:old_c).</li><li>Certain command line options are not handled rightly. For example, "./sampleRoseTranslator -rose:verbose test.C" causes a seg fault.I figured it may due to "CommandlineProcessing::isOptionWithParameter". It seems no check whether there is a real parameter provided for an option. I see this because I use <a class="el" href="namespaceCommandlineProcessing.html">CommandlineProcessing</a>:: isOptionWithParameter(argc, argv, "--uc:", "polymorphic-unit", uc_polymorphic_unit, true); in my code, and "./UC test.C --uc:polymorphic-unit" seg faults but "./UC test.C --uc:polymorphic-unit 1" works fine.</li></ol>
<p>
Consider tutorial example to convert for loop to while loop, specific to C language.<ol type=1>
<li>I've done some more testing on object-oriented codes and implemented all tests that might be interesting: It appears that (according to all my tests):<ul>
<li>that the <a class="el" href="classSgSpecialFunctionModifier.html">SgSpecialFunctionModifier</a> is always correct (for a declaration AND the first_nondefining declaration)</li><li>but the <a class="el" href="classSgFunctionModifier.html">SgFunctionModifier</a> is ONLY correct at the first_nondefining declaration For example: whether a function is virtual or not is only correct at the first_nondefining declaration, but whether a function is a constructor/destructor etc. is always correct. (See email from Markus, 9/1/2006: 4:21pm)</li></ul>
</li></ol>
<p>
Jeremiah suggests adding a test to make sure that the if the parent is set then the current node is a child of the parent. This might be an issue since it might not be traversed, yet still be a child.<ol type=1>
<li>Unclear what to do here, but the static keyword in a variable declaration only sets the <a class="el" href="classSgStorageModifier.html">SgStorageModifier</a> in the <a class="el" href="classSgDeclarationModifier.html">SgDeclarationModifier</a> and not the <a class="el" href="classSgStorageModifier.html">SgStorageModifier</a> held in the SgIntializedName. This is confusing to users. Also, <a class="el" href="namespaceSageInterface.html#345dac5d75b2039d24e0a4f9820d7b7c">isStatic()</a> is always false in the <a class="el" href="classSgStorageModifier.html">SgStorageModifier</a> held in the SgInitializedName! I think that we should just verify these properties, they are already documented in the *.docs files.</li><li>Reimplement how we handle mangled names. Use a global state to record when any transformation has taken place and record what IR nodes have been transformed in a list included as part of the global state.</li><li>Refactor code used in get_type to strip modifiers etc. to recover the base type.</li><li>Remove compilerName where used as function input since it is now ignored and we use BACKEND_C_COMPILER_NAME_WITH_PATH and BACKEND_CXX_COMPILER_NAME_WITH_PATH instead. These are set at configure time and may be overridden with explicit paths to the target compiler. The name of the C++ compiler (without path) is used internally for some testing. Same for linkerName in link() functions.</li></ol>
<p>
Rejected modifications for <a class="el" href="namespaceROSE.html">ROSE</a>:<ol type=1>
<li>OpenMP "opm parallel" pragma can be considered to reference a statement, however when used in <a class="el" href="namespaceROSE.html">ROSE</a> it is just a <a class="el" href="classSgPragmaDeclaration.html">SgPragmaDeclaration</a> followed by a <a class="el" href="classSgStatement.html">SgStatement</a>. Neither preorder or postorder tree traversal will give us the desired bottomup processing for OpenMP pragmas. For example: the code <br>
 pragma omp parallel <br>
 { <br>
 pragma omp single <br>
 statement1; <br>
 } <br>
 Its AST looks like: <br>
 --SgBasicBlock1 <br>
 ------- /------\ <br>
 ------ /--------\ <br>
 ---SgPragma1--SgBasicBlock2 <br>
 ---------------------/------\ <br>
 -----------------SgPragma2--SgStatement1 <br>
 For preorder, the order of visit would be: (bb1, pragma1, bb2, pragma2, stmt1). For postorder, it is: (pragma1, pragma2, stmt1,bb2, bb1) In both cases, pragma1(omp parallel) is always visited before pragma2(omp single). Alternative way: use the default preorder in AST query and reverse it: We get what we want then: (stmt1, pragma2, bb2,pragma1, bb1). Comments from Dan: the problem here is that it is only OpenMP that expects that semantics of pragma to work this way and since it is not uniform for how pragma can be used this is application specific. More discussion on this subject is welcome.</li></ol>
<p>
Currently tested <a class="el" href="namespaceROSE.html">ROSE</a><ol type=1>
<li>excludes CompilerTests (commented out to speed up the tests)</li></ol>
<h2><a class="anchor" name="Plum">
Hall C/C++ Compiler Test suite</a></h2>
A number of negative tests pass, and <a class="el" href="namespaceROSE.html">ROSE</a> should be fixed so that there fail properly.<ul>
<li>Nonexistant header file in include statement. This fails in EDG, but is recorded as a pass in <a class="el" href="namespaceROSE.html">ROSE</a> when -rose:negative_test is used.</li><li>An source file with no definition (n09003.c), should be an error. It is however not an error in EDG or GNU (and it should be under ANSI C mode). We could enforce it in <a class="el" href="namespaceROSE.html">ROSE</a>, but we have not defined a place in <a class="el" href="namespaceROSE.html">ROSE</a> to semantic analysis not handled by the frontend, but this could be done.</li></ul>
<h2><a class="anchor" name="RoseDocumentation">
General Documentation of ROSE</a></h2>
Suggestions of things to do to improve the documentation of <a class="el" href="namespaceROSE.html">ROSE</a>:<p>
<ul>
<li>Switch documentation to PDF, instead of Postscript.</li></ul>
<p>
<ul>
<li><a class="el" href="namespaceROSE.html">ROSE</a> Overview (proposed chapter for Rich to think about)<ol type=a>
<li><a class="el" href="namespaceROSE.html">ROSE</a> documentation<ul>
<li><a class="el" href="namespaceROSE.html">ROSE</a> features</li><li>Language front-ends</li><li>Code generation</li><li><a class="el" href="namespaceROSE.html">ROSE</a> directory organization</li></ul>
</li><li>SAGE III Overview<ul>
<li>Rules for IR nodes (which contain variable length lists of children)</li><li>Figure to describe IR node hierarchy</li><li>description of categories of IR nodes</li><li>relationship to C++ grammar</li><li>Integrate with current "Sage III Intermediate Representation" (current Chapter 10).</li><li>Properties of IR nodes (No null pointers, what few pointers are NULL, what IR nodes are shared,defining/non-defining declarations)</li><li>AST Merge Mechanism</li><li>File I/O</li><li>How modifiers are handled</li></ul>
</li></ol>
</li></ul>
<p>
<ul>
<li>Query Library (Chapter 5)<ol type=a>
<li>Documentation should be shorter and reference the tutorial where there should be a chapter on the Query Library. The HTML documentation should also document the API.</li><li>Show use of queries: IR nodes, names, numbers, IR types</li><li>Show composition of queries.</li><li>Show use of extensible features in Query Library (user-defined functions, etc.)</li></ol>
</li></ul>
<p>
<ul>
<li>AST Rewrite Mechanism (Chapter 7)<ol type=a>
<li>function interfaces in table need to be updated, location is now scope and position in scope (two parameters).</li><li>Remove examples and reference the tutorial.</li><li>Note that High-Level Interface is under construction.</li><li>After the newer proposed Sage Interface API is done, document it here.</li><li>Reference the tutorial (build chapter in <a class="el" href="namespaceROSE.html">ROSE</a> Tutorial specific to AST Rewrite Mechanism)</li><li>Include overview of what is in the tutorial.</li></ol>
</li></ul>
<p>
<ul>
<li>Program <a class="el" href="classAnalysis.html">Analysis</a> (Chapter 8)<ol type=a>
<li>Figure out from Michelle and Brian what from OpenAnalysis can be referenced. Try to include tutorial examples and see if we can include Open <a class="el" href="classAnalysis.html">Analysis</a> in <a class="el" href="namespaceROSE.html">ROSE</a> distribution.</li><li>Remove the data base discussion.</li><li>reference tutorial and add chapter with sections on CFG, Call-graph, Dependence <a class="el" href="classAnalysis.html">Analysis</a>, Slicing, etc.</li></ol>
</li></ul>
<p>
<ul>
<li>The Class Hierarchy page generated by Doxygen has a large number of classes which I think whould not be documented.</li></ul>
<p>
<ul>
<li>AstProcessingChapter <br>
<ol type=a>
<li><a class="el" href="classAstTopDownProcessing.html">AstTopDownProcessing</a> example in <a class="el" href="namespaceROSE.html">ROSE</a> Manual specifies the order of traversal and this is incorrect.</li><li>AstProcessing examples use Sg prefix name and the <a class="el" href="namespaceROSE.html">ROSE</a> manual does not.</li></ol>
</li></ul>
<p>
Additional Comments from Rich on <a class="el" href="namespaceROSE.html">ROSE</a> manual 0.8.7a:<p>
<ul>
<li>Eliminate Section 2.3.1, as it's only a little bit shorter than 2.3.2 (and so really does not summarize or add new information).</li></ul>
<p>
<ul>
<li>Chapter 3: Rename to 'Writing Your First Source-to-Source Translator in ROSE'</li></ul>
<p>
<ul>
<li>Chapter 3: subsection on testing. Explain line 15, when it may be called (i.e., after transformations even though none shown in this example). This helps to establish a sense of 'ROSE best-practices.'</li></ul>
<p>
<ul>
<li>Chapter 4 (Overview of <a class="el" href="namespaceROSE.html">ROSE</a>): Rename to the slightly more descriptive, 'Overview of the <a class="el" href="namespaceROSE.html">ROSE</a> Infrastructure'. I interpreted this section as highlighting the major components of the infrastructure that users will use to build their translators. That is, this chapter is something of a preview of all the chapters to come.</li></ul>
<p>
<ul>
<li>Chapter 10 (Sage III): This chapter should appear right after the current Chapter 4.</li></ul>
<p>
<ul>
<li>Chapter 11 (Appendix): The appendix is quite unwieldy. How can we better organize it? What about the following?</li></ul>
<p>
Adminstrative<ul>
<li>Getting a version of the EDG license (11.6)<ul>
<li>This section includes the e-mail addresses of people outside the group and its immediate collaborators, and so we might not want to publish this on the web.</li></ul>
</li></ul>
<p>
<ul>
<li>Rather than having this information here (aside from a mention), we could alternatively keep form letter with this information on an internal (or unlinked) <a class="el" href="namespaceROSE.html">ROSE</a> webpage that we can send out when people ask.</li></ul>
<p>
Properties of the AST<ul>
<li>Correctness (11.10)</li><li>Normalization (11.11)</li></ul>
<p>
<ul>
<li>Declarations (forward vs. defining) (11.15)</li><li>Name mangling (11.17)</li></ul>
<p>
<ul>
<li>Comments handling (11.2)</li><li>cpp directive handling (11.3)</li></ul>
<p>
<ul>
<li>Join these into a section called 'Comments and Preprocessor Directives'</li></ul>
<p>
<ul>
<li>Pragma handling (11.4)</li></ul>
<p>
<ul>
<li>Template handling (11.7)</li><li>Prelinking (11.8)</li></ul>
<p>
<ul>
<li>Language and translator issues<ul>
<li>Compiling ROSE-generated code using <a class="el" href="namespaceROSE.html">ROSE</a> (11.9)</li><li>Non-standard features (Section 11.13)</li><li>ROSE-specific headers (11.14)</li><li>Passing options to EDG and <a class="el" href="namespaceROSE.html">ROSE</a> (11.18)</li><li>C and C++ modes (11.19)</li></ul>
</li></ul>
<p>
<ul>
<li>Stuff to move?</li></ul>
<p>
<ul>
<li>Separation of EDG source (11.16) --&gt; MOVE to Chapter 12</li><li>Adding new Sage III IR nodes (11.5) --&gt; MOVE to Chapter 12</li></ul>
<p>
Stuff to eliminate?<p>
<ul>
<li>Easy mistakes to make (11.12) --&gt; Says never to compile in the source tree, which contradicts text of Chapter 2 (which says it is merely not well-tested). Could probably eliminate this section unless we come up with other material.</li></ul>
<p>
<ul>
<li>Error messages (11.1) Do we need this section? It's one sentence.</li></ul>
<h2><a class="anchor" name="RoseConfiguration">
General Configuration and Build Issues</a></h2>
<ul>
<li>Fix up configuration to permit building in the source tree Should work currently, but make clean will remove *.tex files in ROSE/docs/Rose directory.</li></ul>
<p>
<ul>
<li>Remove many old configure options (see configure --help)</li></ul>
<h2><a class="anchor" name="RoseTutorialToDoList">
ROSE Tutorial Todo List</a></h2>
<ul>
<li>Put PDF example into <a class="el" href="namespaceROSE.html">ROSE</a> Tutorial (since it will be removed from the <a class="el" href="namespaceROSE.html">ROSE</a> User Manual).</li></ul>
<p>
<ul>
<li>Michelle Strout reports that the ROSE/tutorial/codeCoverage.C example code does not compile properly with 64bit architectures using the 4.0.2 compiler on the Intel Opteron processor. Her solution was to comment out this tutorial example.</li></ul>
<p>
<ul>
<li>Add Class Hierarchy graph example to tutorial.</li></ul>
<p>
<ul>
<li>Add example showing how to figure out if a variable declaration is part of a class.</li></ul>
<p>
<ul>
<li>Add example showing how to test code for patterns of "=" used instead of "==" in conditionals of branchs. Simple code pattern recognition.</li></ul>
<p>
<ul>
<li>Each tutorial example should explain what the reader should learn.</li></ul>
<p>
<ul>
<li>Comments from Rich:<ul>
<li>All sample translator source code examples: The comments at the top of most examples need to be updated to be a short (1-sentence) summary of the example. (These can usually be copied from the Figure caption, but should also appear at the top of the source for people who copy/edit the examples directly.)</li></ul>
</li></ul>
<p>
<ul>
<li>Add an example bug report so that it is clear how to submit a bug report.</li></ul>
<p>
<ul>
<li>Develop and demonstrate a mechanism to add attributes to IR nodes so that they will be colored in the dot output. Helpful for debugging the new AST merge (based on the new name mangling and the new memory pool traversal).</li></ul>
<h2><a class="anchor" name="RosettaToDoList">
ROSETTA Todo List</a></h2>
<ul>
<li>Add mechanism to build static functions for each IR node to identify it as being an IR node supporting:<ul>
<li>C</li><li>C++</li><li>FORTRAN If we return an std::vector&lt;bool&gt; type then we can support combinations of them else we could use an "int:3" or a "short int" type. Since it would be static the space is not an issue. However since it is likely to be called often there might be a performance advantage of one over the other.</li></ul>
</li></ul>
<p>
<ul>
<li>Need to define array new operators for each IR node so that allocation of an array of IR nodes will either be properly handled or will be disabled. Several mechanisms within <a class="el" href="namespaceROSE.html">ROSE</a> require IR nodes be build within the memory pool. This makes it a problem for any IR nodes not built with the IR node's new operator. We can backup this requirement by testing if all referenced IR nodes are in the memory pools. This test catches IR nodes that are build in global scope, on the stack, or in the heap. This constraint is required for the memory pool traversal and visitor pattern support and the AST File I/O.</li></ul>
<p>
<ul>
<li>ROSETTA uses char* type variables in many places and we need to move it to using C++ strings instead.</li></ul>
<h2><a class="anchor" name="RoseTranslatorConstruction">
ROSE Translator Construction Todo List</a></h2>
<ul>
<li>Need a policy on output from <a class="el" href="namespaceROSE.html">ROSE</a> translators of that commandline options such as "-E" and "-H" don't have output in them. This can cause problems for autoconf macros within large projects.</li></ul>
<h2><a class="anchor" name="NamespaceSupport">
Namespace Support</a></h2>
Need a policy on what namespaces we want to have, current suggestion is:<ul>
<li>Frontend</li><li>Backend</li><li><a class="el" href="classAnalysis.html">Analysis</a><ul>
<li>PRE (Currently have this)</li><li>DominatorTreesAndDominanceFrontiers (Currently have this)</li></ul>
</li><li>Transformation</li><li><a class="el" href="namespaceROSE.html">ROSE</a> BASE<ul>
<li>SageIII IR</li><li>Rewrite Mechanism (high level would depend on front-end)</li><li>Traversals</li><li>astDiagnostics</li><li><a class="el" href="namespaceSageInterface.html">SageInterface</a></li></ul>
</li></ul>
<h2><a class="anchor" name="SageIII_Details">
SageIII Details</a></h2>
<h3><a class="anchor" name="">
</a></h3>
<ul>
<li>Need to test mangled names for uniqueness, and for equality when they define the same construct. This should be a test that can be run on any input code, as apposed to hand crafted inputs. A suggested test would be:<ul>
<li>For each non-defining declaration, verify that the mangled name matches the defining declaration.</li><li>For each defining declaration save the name in a list and report any name collisions in the list (ODR, One-time Definition Rule, would be used to verify that there would be only one definition and so any collision would be an error.</li><li>Templates would have to be resolved back to their template definition and be unique in a modified sense.</li><li>Need to nail down any other missing details required for this test...</li></ul>
</li></ul>
<h2><a class="anchor" name="ROSE_Configuration">
ROSE Configuration</a></h2>
This section documents things to do that are specific to the <a class="el" href="namespaceROSE.html">ROSE</a> configuration.<ul>
<li>There are a number of Automake configuration options and we might not need all of these:<ul>
<li>AM_CONDITIONAL(ROSE_USE_BOOST_WAVE,test "$with_boost_wave" = yes)</li><li>AM_CONDITIONAL(ROSE_USE_SQLITE_DATABASE,test ! "$with_SQLite" = no)</li><li>AM_CONDITIONAL(ROSE_USE_MAPLE,test ! "$with_maple" = no)</li><li>AM_CONDITIONAL(ROSE_USE_VISUALIZATION,(test ! "$with_FLTK_include" = no) || ...</li><li>AM_CONDITIONAL(AXXPXX_SPECIFIC_TESTS,test ! "$with_AxxPxx" = no)</li><li>AM_CONDITIONAL(DQ_DEVELOPER_TESTS,test "$enable_dq_developer_tests" = yes)</li><li>AM_CONDITIONAL(ROSE_USE_DATABASE,test ! "$with_MySQL" = no)</li><li>AM_CONDITIONAL(ROSE_PERFORMANCE_TESTS,test ! "$with_PERFORMANCE_TESTS" = no)</li></ul>
</li></ul>
<h2><a class="anchor" name="ROSE_QuickReferenceGuide">
ROSE Quick Reference Guide</a></h2>
It has been proposed that we build a <a class="el" href="namespaceROSE.html">ROSE</a> Quick Reference Guide. If we do this it should include:<ul>
<li>Significant configuration option for <a class="el" href="namespaceROSE.html">ROSE</a></li><li>Location of documentation</li><li>Top level graph of <a class="el" href="namespaceROSE.html">ROSE</a> directory file structure</li><li>Top level graph of AST structure</li><li>Common Traversal base class names</li><li>???</li></ul>
<h2><a class="anchor" name="Support">
and testing of C++ covariant return types for virtual functions</a></h2>
Covariant return type handling is presented in test2006_81.C, and the support for it is in place within <a class="el" href="namespaceROSE.html">ROSE</a> in that we store the return type and the original return type for all function types.<ul>
<li>I think that the original return type might only make sense for member function types.</li><li>This whole subject needs to be reviewed and tested within <a class="el" href="namespaceROSE.html">ROSE</a>.</li><li>At the moment the original return type is generally a reference or a copy of the return type.</li><li>This work may be tied to the support for both name mangling (or function types) and the construction of the global function type table (recently completed, but not checked for proper handling of covariant return types).</li></ul>
<h2><a class="anchor" name="AST">
Rewrite Mechanism</a></h2>
The AST Rewrite mechanism provides a simple way to specify transformations using strings. However, it is not very robust and will require more work before it is useful in a production environment. This is a start at a bug list:<ul>
<li>Isaac reports that the MiddleLevelRewrite works for him, but not when 2 files are specified on the commandline (Instressing!)</li></ul>
<h2><a class="anchor" name="AST">
Rewrite Mechanism</a></h2>
This is a suite of transformations designed to transform C++ code to make those things that are expressed implicitly in the language be expressed explicitly in the AST. The goal of these transformations is to make the AST more amenable to analyses such as control-flow graph analysis. It currently consists of the following transformations:<p>
defaultFunctionGenerator Generates default constructors, destructors, operator=(), and copy constructors.<p>
destructorCallAnnotator Annotates the AST with calls to class destructors whenever objects go out of scope.<p>
shortCircuitingTransformation Transforms the evaluation of short-circuited expressions to explicitly evaluate each step. A prerequisite of destructorCallAnnotator.<p>
Credits ======= Brian White Chunhua Liao Peter Collingbourne<p>
List of remaining work to do:<ol type=1>
<li>Brian White has written about changing SgAssignmentInitializers to SgConstructorInitializers (need to find that email and do this work).</li><li><a class="el" href="classFunction.html">Function</a> calls to the operator=() are not implemented in the AST.</li><li>Need to look at casts, which might appear differently in the AST if the constrctors or conversion operators are defined explicitly.</li><li>Conversion operators are not implicit, and so not an issue. </li></ol>
<hr size="1"><address style="align: right;"><small>Generated on 20 Jan 2013 for ROSE by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
